<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>asciicast example vignette • asciicast</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="asciicast example vignette">
<meta property="og:description" content="asciicast">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">asciicast</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/asciicast-demo.html">asciicast example vignette</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/asciicast/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="asciicast-demo_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="asciicast-demo_files/asciinema_player-2.6.1/asciinema-player.css" rel="stylesheet">
<script src="asciicast-demo_files/asciinema_player-2.6.1/asciinema-player.js"></script><script src="asciicast-demo_files/asciinema_player-binding-2.0.0/asciinema_player.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>asciicast example vignette</h1>
                        <h4 data-toc-skip class="author">Gábor Csárdi</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/asciicast/blob/HEAD/vignettes/asciicast-demo.Rmd" class="external-link"><code>vignettes/asciicast-demo.Rmd</code></a></small>
      <div class="hidden name"><code>asciicast-demo.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is an example vignette for creating asciinema screen casts. To include a screencast in your document, you need to do two steps. The first is to initialize the asciicast engine:</p>
<pre><code>```{r echo = FALSE, results = "hide", purl = FALSE}
asciicast::init_knitr_engine()
```</code></pre>
<p>After this, for the chunks that you want to display in an asciinema player, use the asciicast engine:</p>
<pre><code>```{asciicast}
# This will be an ascii cast
# Let's evaluate some code
head(mtcars)
```</code></pre>
<p>This will produce the following cast:</p>
<p><img src="asciicast-demo_files/figure-html/unnamed-chunk-2.svg" width="700"></p>
</div>
<div class="section level2">
<h2 id="changing-parameters">Changing parameters<a class="anchor" aria-label="anchor" href="#changing-parameters"></a>
</h2>
<p>You can include a DCF header in the asciicast, to set some parameters, e.g. the height of the widget.</p>
<pre><code>```{asciicast}
#' Rows: 5

# No much here, so avoid a big widget
1 + 2 + 3 + 4
```</code></pre>
<p><img src="asciicast-demo_files/figure-html/unnamed-chunk-3.svg" width="700"></p>
</div>
<div class="section level2">
<h2 id="caching">Caching<a class="anchor" aria-label="anchor" href="#caching"></a>
</h2>
<p>Recording the asciinema casts might take long, as everything happens in real time. You can tell knitr to cache the results, as long as the code of the chunk is unchanged. E.g. the previous chunk with caching looks like this:</p>
<pre><code>```{asciicast cache = TRUE}
#' Rows: 5

# Not much here, so avoid a big widget
1 + 2 + 3 + 4
```</code></pre>
</div>
<div class="section level2">
<h2 id="casting-a-script-from-a-file">Casting a script from a file<a class="anchor" aria-label="anchor" href="#casting-a-script-from-a-file"></a>
</h2>
<p>It is possible to read the R code of a cast from a file, instead of specifying it in the code chunk. The advantage of this is that it is easier to use the code in the R scripts for other purposes.</p>
<pre><code>```{asciicast code = readLines("../inst/examples/hello.R")}
```</code></pre>
<p><img src="asciicast-demo_files/figure-html/unnamed-chunk-4.svg" width="700"></p>
</div>
<div class="section level2">
<h2 id="using-svg-files">Using SVG files<a class="anchor" aria-label="anchor" href="#using-svg-files"></a>
</h2>
<p>Sometimes the asciinema player widget cannot be used, because custom JavaScript code is forbidden on the page. A common example is README (and other) markdown files on GitHub. acsiicast can also use animated SVG images instead of the asciinema player HTML widget. For this set the <code>asciicast_knitr_svg</code> option to <code>TRUE</code>, or the <code>ASCIICAST_KNITR_SVG</code> environment variable to <code>TRUE</code>. (The former takes precedence if both are set.)</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>asciicast_knitr_svg <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>```{asciicast}
#' Rows: 3
cli::rule(center = "TITLE", line = "~-", line_col = "blue")
```</code></pre>
<p><img src="asciicast-demo_files/figure-html/unnamed-chunk-6.svg" width="700"></p>
<p>You can also use SVG files to show still screenshots, with the state of the screen after running the R code.</p>
<pre><code>```{asciicast}
#' Rows: 3
#' At: end
#' Window: FALSE
#' Padding: 10
#' Cursor: FALSE
cli::rule(center = "TITLE", line = "~-", line_col = "blue")
```</code></pre>
<p><img src="asciicast-demo_files/figure-html/unnamed-chunk-7.svg" width="700"></p>
</div>
<div class="section level2">
<h2 id="showing-the-code">Showing the code<a class="anchor" aria-label="anchor" href="#showing-the-code"></a>
</h2>
<p>By default asciicast code chunks do not show the code, i.e. the <code>echo</code> kntr option is set to <code>FALSE</code> for them. You can override this locally for a code chunk, or globally, by supplying the <code>echo</code> argument to <code><a href="../reference/init_knitr_engine.html">asciicast::init_knitr_engine()</a></code>.</p>
<pre><code>```{asciicast echo = TRUE}
#' Rows: 5
#' At: end
# This code will be shown
head(mtcars, 3)
```</code></pre>
<p>This will show the code above the SVG image. The header is not shown:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This code will be shown</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="asciicast-demo_files/figure-html/unnamed-chunk-8.svg" width="700"></p>
</div>
<div class="section level2">
<h2 id="cpp11-integration">cpp11 integration<a class="anchor" aria-label="anchor" href="#cpp11-integration"></a>
</h2>
<p>Use the <code>asciicastcpp11</code> knitr engine to compile cpp11 functions in the asciicast subprocess:</p>
<pre><code>```{asciicastcpp11}
double mean_cpp(doubles x) {
  int n = x.size();
  double total = 0;
  for (double value : x) {
     total += value;
  }
  return total / n;
}
```</code></pre>
<p>Then you can use these functions in regular <code>asciicast</code> chunks:</p>
<pre><code>```{asciicast}
mean_cpp(1:10000*1.0)
```</code></pre>
<p><img src="asciicast-demo_files/figure-html/unnamed-chunk-10.svg" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Gábor Csárdi, Romain Francois, Mario Nebl, Marcin Kulik.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
